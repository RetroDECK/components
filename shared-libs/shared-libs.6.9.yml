app-id: net.retrodeck.shared-libs
runtime: org.kde.Platform
runtime-version: &runtime-version '6.9'
sdk: org.kde.Sdk

add-extensions:
  org.freedesktop.Platform.ffmpeg-full:
    directory: lib/ffmpeg
    add-ld-path: .
    version: *runtime-version
    no-autodownload: true
    autodelete: false

cleanup:
  - "/include"
  - "/lib/pkgconfig"
  - "/lib/debug"

modules:

  - name: shared-libs.6.9
    buildsystem: simple
    build-commands:
      - |
        source ./gather_plugins.sh
        gather_plugins "org.kde.Platform" "6.9"
    sources:
      - type: dir
        path: .
      - type: file
        path: ../automation-tools/gather_plugins.sh
