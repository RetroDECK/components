app-id: net.retrodeck.shared-libs
runtime: org.kde.Platform
runtime-version: '6.7'
sdk: org.kde.Sdk

cleanup:
  - "/include"
  - "/lib/pkgconfig"
  - "/lib/debug"

modules:

  # Needed for ES-DE
  - name: libopenh264
    buildsystem: simple
    build-commands:
      - mkdir -p ${FLATPAK_DEST}/lib
      - bunzip2 libopenh264-2.3.0-linux64.6.so.bz2
      - mv libopenh264-2.3.0-linux64.6.so ${FLATPAK_DEST}/lib/libopenh264.so.6
    sources:
      - type: file
        url: http://ciscobinary.openh264.org/libopenh264-2.3.0-linux64.6.so.bz2
        sha256: a6294cde9ae10966cc639481b5c39b7fc57b2fcad417f11d7baca3b0f7914985

  - name: shared-libs.6.7
    buildsystem: simple
    build-commands:
      - |
        source ./search_libs.sh
        search_libs "shared-libs-6.7.txt"
    sources:
      - type: dir
        path: .
      - type: file
        path: ../automation-tools/search_libs.sh
